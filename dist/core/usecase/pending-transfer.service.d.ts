import { OnModuleDestroy } from '@nestjs/common';
import { ThLoggerService } from 'themis';
import { ConfirmationResponse } from '@core/model';
import { IMolPaymentProvider } from '@core/provider';
import { TransferConfigService } from '@config/transfer-config.service';
import { ExternalServicesConfigService } from '@config/external-services-config.service';
type ConfirmationSource = 'webhook' | 'polling';
export declare class PendingTransferService implements OnModuleDestroy {
    private readonly loggerService;
    private readonly molPaymentProvider;
    private readonly transferConfig;
    private readonly externalServicesConfig;
    private readonly logger;
    private readonly pendingTransfers;
    private readonly TIMEOUT_MS;
    private readonly POLLING_START_DELAY_MS;
    private readonly POLLING_INTERVAL_MS;
    private readonly MOL_QUERY_TIMEOUT_MS;
    private readonly ENABLE_MOL_POLLING;
    private readonly CLEANUP_INTERVAL_MS;
    private cleanupIntervalId?;
    constructor(loggerService: ThLoggerService, molPaymentProvider: IMolPaymentProvider, transferConfig: TransferConfigService, externalServicesConfig: ExternalServicesConfigService);
    waitForConfirmation(transactionId: string, endToEndId: string, startedAt?: number): Promise<ConfirmationResponse>;
    resolveConfirmation(endToEndId: string, response: ConfirmationResponse, source?: ConfirmationSource): boolean;
    getPendingCount(): number;
    getTransactionIdByEndToEndId(endToEndId: string): string | undefined;
    clearAll(): void;
    onModuleDestroy(): void;
    private startCleanupInterval;
    private performCleanup;
    private handleDuplicateEndToEndId;
    private registerPendingTransfer;
    private logUnknownConfirmation;
    private logConfirmationResolution;
    private completePendingConfirmation;
    private startPollingFallback;
    private isSuccessfulMolResponse;
    private mapMolStatusToTransferResponseCode;
}
export {};
